<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/mongo-scala-driver/1.0/img/favicon.png">

    <title>CRUD Operations</title>

    <link rel="stylesheet" href="/mongo-scala-driver/1.0/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-scala-driver/1.0/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="/mongo-scala-driver/1.0/../">
        <img src="/mongo-scala-driver/1.0/img/logo-mongodb-header.png", alt="MongoDB.org" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="http://try.mongodb.org/" data-toggle="tooltip" data-placement="bottom" title="Try MongoDB in the browser">Try it Out</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/mongo-scala-driver/1.0">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/mongo-scala-driver/1.0/../">MongoDB Scala Driver</a>
          <a class="version pull-right" href="/mongo-scala-driver/1.0">1.0</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
    
  
  


        
      
    
      
      
        
      
    
      
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-scala-driver/1.0/getting-started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/getting-started/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/getting-started/quick-tour-primer/">
        <i class='fa'></i>
        Quick Tour Primer
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/getting-started/quick-tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/getting-started/quick-tour-admin/">
        <i class='fa'></i>
        Admin Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/mongo-scala-driver/1.0/reference/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-scala-driver/1.0/reference/connecting/" class="">
      <i class='fa'></i>
      <span>Connecting</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-scala-driver/1.0/reference/connecting/connection-settings/">
        <i class='fa'></i>
        Connection Settings
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-scala-driver/1.0/reference/connecting/ssl/">
        <i class='fa'></i>
        SSL
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-scala-driver/1.0/reference/connecting/authenticating/">
        <i class='fa'></i>
        Authenticating
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        













  




    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/reference/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/reference/observables/">
        <i class='fa'></i>
        Observables
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-scala-driver/1.0/reference/management/" class="">
      <i class='fa'></i>
      <span>Management</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-scala-driver/1.0/reference/management/logging/">
        <i class='fa'></i>
        Logging
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-scala-driver/1.0/reference/management/monitoring/">
        <i class='fa'></i>
        Monitoring
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-scala-driver/1.0/bson/" class="">
      <i class='fa fa-th'></i>
      <span>BSON</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/bson/documents/">
        <i class='fa'></i>
        Documents
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/bson/extended-json/">
        <i class='fa'></i>
        Extended JSON
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-scala-driver/1.0/builders/" class="">
      <i class='fa fa-wrench'></i>
      <span>Builders</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/filters/">
        <i class='fa'></i>
        Filters
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/projections/">
        <i class='fa'></i>
        Projections
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/sorts/">
        <i class='fa'></i>
        Sort Criteria  
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/aggregation/">
        <i class='fa'></i>
        Aggregation
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/updates/">
        <i class='fa'></i>
        Updates
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-scala-driver/1.0/builders/indexes/">
        <i class='fa'></i>
        Indexes
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-scala-driver/1.0/integrations/">
        <i class='fa fa-arrows-h'></i>
        Integrations
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-scala-driver/1.0/scaladoc/">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-scala-driver/tree/master">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-scala-driver/1.0/issues-help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/mongo-scala-driver/blob/master/docs/reference/content/reference/crud/index.md" target="_blank" title="Edit reference/crud/index.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  
  <li><a href="/mongo-scala-driver/1.0/reference/">Reference</a> <i class="fa fa-angle-right"></i></li>
  <li>CRUD Operations</li>
</ul>
</div>




<h2 id="crud">CRUD</h2>

<p>For a walkthrough of the main CRUD operations please refer to the <a href="/mongo-scala-driver/1.0/getting-started/quick-tour/">Quick Tour</a>.</p>

<p>All CRUD-related methods in the Scala driver are accessed through the
<a href="/mongo-scala-driver/1.0/scaladoc/index.html#org.mongodb.scala.MongoCollection
"><code>MongoCollection</code></a> case class.  Instances of
<code>MongoCollection</code> can be obtained from a <a href="/mongo-scala-driver/1.0/scaladoc/index.html#org.mongodb.scala.MongoClient
"><code>MongoClient</code></a> instance by way of a
<a href="/mongo-scala-driver/1.0/scaladoc/index.html#org.mongodb.scala.MongoDatabase
"><code>MongoDatabase</code></a>:</p>

<pre><code class="language-scala">val client: MongoClient = MongoClient()
val database: MongoDatabase = client.getDatabase(&quot;mydb&quot;)
val collection: MongoCollection[Document] = database.getCollection(&quot;mycoll&quot;)
</code></pre>

<p><a href="/mongo-scala-driver/1.0/scaladoc/index.html#org.mongodb.scala.MongoCollection
"><code>MongoCollection</code></a> takes the type of <code>TDocument</code> which defines the<br />
class that clients use to insert or replace documents in a collection, and the default type returned from <code>find</code> and <code>aggregate</code>.</p>

<p>The single-argument <code>getCollection</code> method returns an instance of <code>MongoCollection[Document]</code>, and so with this type of collection
an application uses instances of the immutable <a href="/mongo-scala-driver/1.0/bson/documents/#immutable-documents"><code>Document</code></a> class:</p>

<pre><code class="language-scala">val collection: MongoCollection[Document] = database.getCollection(&quot;mycoll&quot;)

// insert a document
val document: Document = Document(&quot;_id&quot; -&gt; 1, &quot;x&quot; -&gt; 1)
val insertObservable: Observable[Completed] = collection.insertOne(document)

insertObservable.subscribe(new Observer[Completed] {
  override def onNext(result: Completed): Unit = println(s&quot;onNext: $result&quot;)
  override def onError(e: Throwable): Unit = println(s&quot;onError: $e&quot;)
  override def onComplete(): Unit = println(&quot;onComplete&quot;)
})

...

val replacementDoc: Document = Document(&quot;_id&quot; -&gt; 1, &quot;x&quot; -&gt; 2, &quot;y&quot; -&gt; 3)

// replace a document
collection.replaceOne(Filters.eq(&quot;_id&quot;, 1), replacementDoc
    ).subscribe((updateResult: UpdateResult) =&gt; println(updateResult))

...

// find documents
collection.find().collect().subscribe((results: Seq[Document]) =&gt; println(s&quot;Found: #${results.size}&quot;))
</code></pre>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
<p>See the <a href="/mongo-scala-driver/1.0/reference/observables/"><code>Observables</code></a> documentation for more information about <code>Observables</code> and implicit helpers.</p>

</div>
</p>

<h3 id="codecregistry">CodecRegistry</h3>

<p>An overload of the <code>getCollection</code> method allows clients to specify a different class for representing BSON documents.  For example,
users my wish their own class with the CRUD API directly. Below we use the <code>BsonDocument</code> class from the Scala driver directly:</p>

<pre><code class="language-scala">// Pass BsonDocument.class as the second argument
val collection: MongoCollection[BsonDocument] = database.getCollection(&quot;mycoll&quot;, BsonDocument.class)

// insert a document
val document: BsonDocument = new BsonDocument(&quot;_id&quot;, new BsonInt32(2)).append(&quot;x&quot;, new BsonInt32(1))
collection.insertOne(document).subscribe((x: Completed) =&gt; println(&quot;Inserted&quot;))

...

val replacementDoc: BsonDocument = new BsonDocument(&quot;_id&quot;, new BsonInt32(2)).append(&quot;x&quot;, new BsonInt32(2)).append(&quot;y&quot;, new BsonInt32(3))

// replace a document
collection.replaceOne(Filters.eq(&quot;_id&quot;, document.getInt32(&quot;1&quot;)), replacementDoc).subscribe((updateResult: UpdateResult) =&gt; println(updateResult))

...

// find documents
collection.find().collect().subscribe((results: Seq[BsonDocument]) =&gt; println(s&quot;Found BsonDocuments: #${results.size}&quot;))
</code></pre>

<p>There are two requirements that must be met for any class used in this way:</p>

<ul>
<li>a <code>Codec</code> for it must be registered in the <code>MongoCollection</code>&rsquo;s <code>CodecRegistry</code></li>
<li>the <code>Codec</code> must be one that encodes and decodes a full BSON document (and not just, for example, a single BSON value like an Int32)</li>
</ul>

<p>By default, a <code>MongoCollection</code> is configured with <code>Codec</code>s for two classes:</p>

<ul>
<li><code>Document</code></li>
<li><code>BsonDocument</code></li>
</ul>

<p>Applications, however, are free to register <code>Codec</code> implementations for other classes by customizing the <code>CodecRegistry</code>.  New
<code>CodecRegistry</code> instances are configurable at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withCodecRegistry</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withCodecRegistry</code> method</li>
</ul>

<p>Consider the case of encoding and decoding instances of the <code>UUID</code> class.  The Scala driver by default encodes instances of <code>UUID</code> using a
byte ordering that is not compatible with other MongoDB drivers, and changing the default would be quite dangerous.  But it is
possible for new applications that require interoperability across multiple drivers to be able to change that default, and they can do
that with a <code>CodecRegistry</code>.</p>

<pre><code class="language-scala">// Replaces the default UuidCodec with one that uses the new standard UUID representation
val codecRegistry: CodecRegistry = 
CodecRegistries.fromRegistries(CodecRegistries.fromCodecs(new UuidCodec(UuidRepresentation.STANDARD)),
                               MongoClient.getDefaultCodecRegistry())

// globally
val clientSettings: MongoClientSettings = MongoClients.create(&quot;mongodb://localhost&quot;).getSettings()
newClientSettings = MongoClientSettings.builder(clientSettings).codecRegistry(codecRegistry).build()
val client: MongoClient = MongoClient(newClientSettings)
 

// or per database
val database: MongoDatabase = client.getDatabase(&quot;mydb&quot;)
                                    .withCodecRegistry(codecRegistry)

// or per collection
val collection: MongoCollection&lt;Document&gt; = database.getCollection(&quot;mycoll&quot;)
                                                    .withCodecRegistry(codecRegistry)
</code></pre>

<h3 id="write-concern">Write Concern</h3>

<p>Applications can configure the <code>WriteConcern</code> that a <code>MongoCollection</code> uses for write operations.  Like <code>CodecRegistry</code>, the
<code>WriteConcern</code> can be configured at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withWriteConcern</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withWriteConcern</code> method</li>
</ul>

<h3 id="read-preference">Read Preference</h3>

<p>Applications can configure the <code>ReadPreference</code> that a <code>MongoCollection</code> uses for read operations.  Like <code>WriteConcern</code>, the
<code>ReadPreference</code> can be configured at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withReadPreference</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withReadPreference</code> method</li>
</ul>

<h3 id="immutability-of-mongodatabase-and-mongocollection">Immutability of MongoDatabase and MongoCollection</h3>

<p>Instance of <code>MongoDatabase</code> and <code>MongoCollection</code> are immutable, so rather than mutate the state of the <code>MongoCollection</code> on which they
are invoked, the three methods discussed above return new instances.  Applications should therefore be sure to store the result of the
method call.  For example:</p>

<pre><code class="language-scala">// CORRECT: The results of the method calls are chained and the final one is referenced 
// by collection 
val collection: MongoCollection[Document] = database.getCollection(&quot;mycoll&quot;)
                                                .withWriteConcern(WriteConcern.JOURNALED)
                                                .withReadPreference(ReadPreference.primary())
                                                .withCodecRegistry(newRegistry)

// INCORRECT: withReadPreference returns a new instance of MongoCollection
// It does not modify the collection it's called on.  So this will
// have no effect
collection.withReadPreference(ReadPreference.secondary())
</code></pre>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/mongo-scala-driver/1.0/reference/connecting/">
      <i class="fa fa-long-arrow-left"> </i> Connecting
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/mongo-scala-driver/1.0/reference/observables/">
    Observables <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#crud">CRUD</a>
<ul>
<li><a href="#codecregistry">CodecRegistry</a></li>
<li><a href="#write-concern">Write Concern</a></li>
<li><a href="#read-preference">Read Preference</a></li>
<li><a href="#immutability-of-mongodatabase-and-mongocollection">Immutability of MongoDatabase and MongoCollection</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/mongo-scala-driver/1.0",
   VERSION:     "1.0",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/js/jquery.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/lib/bootstrap.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/js/navbar.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/js/scripts.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/mongo-scala-driver/1.0/js/scala.js"></script>



<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

